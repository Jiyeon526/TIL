# Optional

## 1. Optional이란?

- Optional<T> 클래스를 사용해서 NullPointerException을 방지할 수 있도록 도와준다.
- Java 8 이상부터 사용할 수 있고 null이 올 수 있는 값을 감싸는 Wrapper 클래스이다.
- `Optional<T>` : null이 아닌 T 타입 참조 or 아무것도 담지 않은 것
  - <T> :  제네릭, 클래스, 인터페이스 등의 타입을 파라미터로 사용할 수 있게 해주는 역할

## 2. 메서드

1. `Optional.empty()` : 빈 옵셔널 생성
2. `Optional.of(value)` :  값이 든 옵셔널 생성(value에 null을 넣으면 NullPointerException 발생)
3. `.orElse(value)` : 기본값 설정 가능
4. `.orElseThrow(예외)` : 상황에 맞게 예외를 던짐
5. `.get()` : 옵셔널 값을 가져올 때 사용
6. `.isPresent()` : 옵셔널이 채워져 있으면 true, 비어있으면 false 반환

## 3. 사용

1. Null 할당하지 말아야한다.
2. 값이 없을 때에는 `.orElse()`를 사용해서 꺼낸다.
   - isPresent() → .get() 으로 꺼내기 보다는 .orElse를 사용하면 가독성이 더 좋아진다.
3. 반환 타입으로만 사용해야한다.
   - 반환할 때 에러가 발생할 수 있는 경우에 결과를 명확히 보여주기 위해 만들어졌다.
   - null을 반환하는 것보다 값의 유무를 나타내는 객체를 반환하는것이 합리적이다.

## 4. 사용하면 안되는 이유

1. 컬렉션, 스트림, 배열 등은 옵셔널로 감싸면 안된다.
   - 만약 옵셔널을 사용해서 맵 안에 키가 없다는 사실을 나타낼 때 1. 키 자체가 없는 경우 2. 키는 있지만 키가 속이 빈 옵셔널일 경우 두가지가 된다.
   - 쓸데없이 복잡하고 오류 가능성만 키운다.
   - 해당 값들은 그냥 빈 값을 반환하는게 좋다.
2. 성능 저하 문제
   - 메모리가 추가로 필요하다.
   - 객체에 접근할 때 Optional 객체를 통해서 접근해야한다.